
# 『将棋神やねうら王２(仮)』の予定


- これは、2020年にマイナビから発売する予定の『将棋神やねうら王２(仮)』についてのアイデアのメモです。
- 発売することは確定ではありません。あくまで企画を練っている段階です。
- 誰かに対して、この内容の実現をお約束するものではありません。あくまでアイデアを書いているだけです。


## 商品名の候補


- 『将棋神 やねうら王２』
  - 激指みたく素直なナンバリングにしていくのが無難
- 『将棋神 やねうら王2019』
- 『将棋神 やねうら王 2nd』
- 『将棋天空神 やねうら王』
  - この名前、悪くないのだが続編のネーミングに困りそう。将棋天空神２か？


## 駒・盤面素材の追加


- 駒素材を追加したい
  - 「水無瀬」書体(ohtaroさんからの要望)
  - 関東名人駒の「宗歩好」(mowakaさんからの要望)
  - 「錦旗」書体(N.Fさんからの要望)


## 音声素材について


- 『将棋神やねうら王』では時間がなくて激指の音声素材をそのまま使っていたので、このへん、もっとクオリティの高いものを収録したい。

- 女流棋士3人分ぐらい収録したい
  - 切り替えしたり、読み上げ・秒読みそれぞれ誰にするか選べたりするようにしたい。
  - 指導対局のときの女流棋士の画像などと併せて収録したい考え。


## 棋力調整・棋力の範囲について


- 『将棋神やねうら王』ではCPUの棋力として九段～10級まで出来るようになったが、下の方の段位は自然な弱さとは言い難いものがあった。
- StockfishのSkillLevelを実装して、計測・調整を行うことによって、自然な弱さを実現する。
  - 『将棋神やねうら王』 Update2で実現した。
- 将棋倶楽部24の10級は町道場の初段ぐらいあるので、将棋倶楽部24での15級ぐらいまで用意する。
- 上の方の棋力は、十一段ぐらいまではいまどきのPCならば即指し(1秒以内)になると思われるので、十段(R3400)、十一段(R3600)のプリセットを用意する。
  - 『将棋神やねうら王』Update1で「十二段」まで選べるようにした。[2018/09/03]
  - 次回作では「十三段」「十四段」あたりも欲しい気が。


## 『将棋神やねうら王』を持っている人へのサポート


- 『将棋神やねうら王』の評価関数フォルダを統合する機能を用意する。
- 『将棋神やねうら王』の評価関数フォルダを本ソフトの評価関数として追加できる機能を用意する。

- これにより、本ソフトの思考エンジンと前回の思考エンジンとの対局なども出来るようになるし、思考エンジンを集めて遊ぶというコレクション的な
価値も生み出すことが出来る。


## 収録エンジンについて


- 未定。
- SDT6,WCSC29の上位ソフトを5本程度収録したい考え。


## 定跡編集機能


- 『将棋神やねうら王』には定跡編集機能がなかったが、定跡編集の機能を持たせる。
- また、コンピュータが対局結果から定跡を自動学習するような機能を持たせる。一度遭遇した局面は定跡に登録して即指し出来るようにする。
- Bonanza、柿木将棋の定跡ファイルのコンバート機能を持たせる(検討中)
- やねうら王の定跡生成コマンド(makebookコマンド)をGUIから設定して呼び出せるようにする。


## 戦型・囲いの完成時のエフェクト


- 将棋ウォーズにあるような戦型・囲いの完成度のエフェクト追加
- 人間が指して、表示されたエフェクトをコレクションしていくような機能があると面白い。


## 戦型指定機能


- 居飛車・振飛車だけでなく細かな戦型選択が出来るように
  - 思考エンジン側の対応は難しいので、GUI側が膨大な定跡を持っておいて、それを使って指定戦型に誘導する。
  - 定跡自体は、戦型判別機能が実装されていれば、MultiPV10とかで作った定跡に対して、戦型判別して、その戦型に至る指し手のみを
  選択することが可能となる…はず。各種戦型用の定跡、みたいなのを作る感じ。あるいは、定跡の指し手に対して、戦型Xに至る指し手はこれとこれ、
  みたいなマーカーをつけていくか。
  - その戦型になりやすさという尺度を入れたほうがよさげ。
  - 技巧には戦型選択の機能があるので参考にする。
- 『将棋神やねうら王』のUpdate5あたりで対応するかも。


## 思考エンジンの強化


- R4000→R4200 昨年のソフトに7,8割勝つ強さ (に開発者たちの努力によりなっていると思われる)


## エンジンでの検討機能の強化


- ShogiGUIのように矢印で指し手を図示する機能
  - もう少し良い視覚化の手段が欲しい。候補手とそれに対する期待勝率を表示するとして、移動元の表現が将棋では難しいんだな。


## multi consideration


- 詰将棋エンジンを含む複数エンジンでの同時検討機能
- multi ponderも実装したい


## 詰将棋エンジン


- 『将棋神やねうら王』ではおまけ的存在の位置付けであったが、改良を重ね、長編詰将棋が解けることもアピールしていきたい。


## 指導対局機能


- 指した瞬間にPerfect , Great , Good , Badなどを表示できると面白い。
- 局後に悪かった指し手を日本語文で解説してくれると上達の助けになるのでそういう機能をつけられるものならつけたい。(cf.「将棋山脈」)
- 感想戦機能として、対局後の音声解説みたいなのが実現できると面白い。
- 激指14にある「ここで相手の形を乱す好手があります」のような。
  - https://book.mynavi.jp/shogi/detail/id=71273
- MultiPVの上位の指し手の移動先の升をヒートマップみたいなもので示すなどすればヒント機能として面白いのではなかろうか。



## 棋力判定～レーティング対局


- 自分の棋力を棋譜から判定してくれる機能
- 自分の棋力に合うようにコンピューターの棋力を調整してくれる機能
- 接待モード機能


## 蠱毒


- リーグ戦機能みたいなもの。
- 複数のエンジン、プリセット、対局条件、開始局面などを選んで対局させておける。
  - エンジンの思考時間をランダム化する機能など(これにより指し手がばらける)
- 特定局面から指しついだときの先手勝率、後手勝率を調べたり、エンジンのレーティングを計測したりするのに使える。


## チャレンジ・クエスト


- 指定局面の指定段位のCPUと対局して勝ち切るとクリア。それが25問 × 10枚ぐらい。
- 25問が、5×5のジグソーパズルのようになっていて、クリアするとそこの画像が表示されていき、25問解いた時点で何らかの画像が見えると嬉しい。
- 詰将棋は自動作問・本将棋のほうも、CPU同士の対局などから自動的に作問できると面白い。
- 事前に用意した局面ではないなら、評価値、+500～1000ぐらいのところからCPU相手に勝ち切るというチャレンジが良いかも。
  - 難度をうまく調整するためには事前に用意するほうが好ましいな…。
  - 例えば初段向けの問題であれば、CPU側を9段、人間側を初段ぐらいに設定して、人間側が5割ぐらいの使用率で勝ちきれる難度が好ましいので…。


## SNS連携


- 勝ったときに棋譜をツイートする機能とか



## 局面共有SNS


- 詰将棋や指定局面を思考エンジン名とプリセット、コメントを指定して投稿でき、それを皆で共有できると面白い。
  - 「ここから勝ちきってみろよ」みたいな感じ。
  - マリオメーカーのように、クリア率 0.08%だとか、作者の他の作品を見るだとか、ランキングだとか、そういう感じで楽しめると面白い。
  - 優秀作品の投稿者を表彰する仕組みがあるとなお良し。
- オンラインでクエストなどを解いていくと、仮想通貨やねコイン(通称、やねこ)が貯まる。
  - やねこを使って将棋ウォーズの棋神券みたいなものを購入したり、次回作を割引き購入できるなど何らかの特典があると面白い。
- マイナビの週刊将棋の詰将棋問題などを定期的に公式からの投稿として投稿していければ楽しい。


## チュートリアル


- 操作などチュートリアルを用意して、「XXの操作をする」に応じて、やねこ付与


## 変則ルール


- 変則ルールに対する思考エンジンの高速ブートストラップ手法の確立
  
- 初期陣形
  - Shogi960(将棋神やねうら王 Update3で実装済み)
  - 布石将棋(歩以外は自陣に先後交互に打っていく)

- 盤面サイズ(3*3 , 3*4 , 5*5 , 5*6 , 6*6 など)
  - 盤面サイズの変更×布石将棋みたいな組み合わせも。

- 変則駒
  - 八方桂、女王　の導入とそれに伴う思考エンジン部の対応

- 変則ルール
  - 王手将棋、資本還元将棋等、変則ルールのGUI的なサポート
  - 守備表示あり将棋
    - cf. https://twitter.com/yaneuraou/status/1061894354925539329


## 通信対局


- 考え中
- floodgate参加、ネットワーク対局、AWSにエンジンを置いてのリモート対局、etc…。


## ローカライズ


- 英語版
  - メッセージだけでなく画面素材も差し替えが必要


## カメラ画像からの将棋盤入力


- スマホで撮影した将棋盤の画像から駒の配置を読み取る機能
  - カメラ付きのタブレット端末(Windows)で便利かも。
  - 将来的にスマホ対応にするときにこの機能があると役立ちそう。
